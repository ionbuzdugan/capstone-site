<!DOCTYPE html>
<html lang="zxx" class="no-js">

<head>
    <!-- Mobile Specific Meta -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicon-->
    <link rel="shortcut icon" href="img/fav.png">
    <!-- Author Meta -->
    <meta name="author" content="colorlib">
    <!-- Meta Description -->
    <meta name="description" content="">
    <!-- Meta Keyword -->
    <meta name="keywords" content="">
    <!-- meta character set -->
    <meta charset="UTF-8">
    <!-- Site Title -->
    <title>Progress Blog</title>

    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400,700|Roboto:400,500" rel="stylesheet">
    <!--
			CSS
			============================================= -->
    <link rel="stylesheet" href="css/linearicons.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/owl.carousel.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/nice-select.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/my_style.css">
</head>

<body>

    <!-- Start Header Area -->
    <header class="default-header">
        <nav class="navbar navbar-expand-lg navbar-light">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <img src="img/logo.png " height="50">
                </a>
                <a class="active" href="index.html">Home</a>
                <!-- <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
				 aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
					<span class="fa fa-bars"></span>
				</button> -->

                <!-- <div class="collapse navbar-collapse justify-content-end align-items-center" id="navbarSupportedContent">
					<ul class="navbar-nav">
						<li><a class="active" href="index.html">Home</a></li>
						<li><a href=">blo-single.html">Blog</a></li>
					</ul>
				</div> -->
            </div>
        </nav>
    </header>
    <!-- End Header Area -->

    <!--start banner Area -->
    <section class="banner-area relative" data-parallax="scroll" data-image-src="img/blog-bg.jpg">
        <div class="overlay-bg overlay"></div>
        <div class="container">
            <div class=" fullscreen">
                <div class="row align-items-center text-center banner-content">
                    <div class="col-lg-12">
                        <h1 class="text-white" style="text-align: center">Project Blog</h1>
                        <br><br>
                        <p>Read about the progress of the project.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- End banner Area

	<!-- Start post-content Area -->
    <section class="post-content-area single-post-area section-gap">
        <div class="container">
			<a class="anchor" id="blog-8"></a>
            <h3>April 14, 2021 - A Final Farewell</h3>
            <pre></pre>
            <p>
            This final week has been the final week of the capstone project, symbolically ending on the same day as the rest of the team’s classes. The five year climb of completing one’s introduction to formal education is so close to being finished that each member of the team can all but feel their graphite pickaxes make their last strike. The combined will to prevent an extension to this experience gave the team members a wind which, as they could hold themselves up no longer, pushed them over the finish line even if by a single hair. Separately rallied on the day of demonstration the team was able to convey the success of the project which exemplified all that the program prepared them for. The video below is a testament to a project which exceeded all expectations of the faculty, and is chosen to be kept on the permanent record of the internet to show the capabilities of a multidisciplinary group of engineering students standing on a combined 25 years of formal education. 
            <br>
            <br>
            As the beginning of a new life is in the line of sight of each team member, they all take a minute to recall a few moments when their paths crossed, remembering the people who made the experience a shared one. And though the future is veiled in mist, it is made of particles no different than those already walked through, and indeed the same ones making up the world right now. Some things are lost to history with every passing increment of time, but time remains. And as long as time remains, an hourglass will keep it.
            <br>
            <br>
            Farewell,
            <br> 
            Team Hourglass
                                
            <iframe width="300" height="400" class="center"
                    src="https://www.youtube.com/watch?v=z33n8ZfLiwk">
            </iframe> 
            </p>
        </div>
        <div class="section-gap-top"></div>

        <div class="container">
			<a class="anchor" id="blog-7"></a>
            <h3>March 26, 2021 - Preparing for Capstone Presentation</h3>
            <pre></pre>
            <p>
            This week with the poster deliverable due, focus shifted to compiling group progress thus far and presenting it in captivating fashion. Hayden having completed extensive testing allowed for statistical analysis of the dilutions from a range of input concentrations, output concentrations, and output volumes. Fraser completed renders of the final design in CAD and created the poster using Keynote. Similar to the design intent, emphasis was placed on simplicity while also providing a rich data driven context for the design process. After team feedback, the poster was polished up and ready for the deadline. 
            <br>
            Footage for the marketing video was filmed by Hayden over the past few weeks, and Ion narrated and edited the video together into the instant classic seen below, turning Hourglass into a household name:                
            <iframe width="300" height="400" class="center"
                    src="https://www.youtube.com/watch?v=PS5wn7Rue5E">
            </iframe> 
            </p>
        </div>
        <div class="section-gap-top"></div>

        <div class="container">
			<a class="anchor" id="blog-6"></a>
            <h3>March 19, 2021 - Testing</h3>
            <pre></pre>
            <p>
            This week’s main update is that testing is complete! A total of 48 tests over the full range of inputs, as well as 15 tests of repeatability were completed. The initial 48 tests showed that the system meets our constraints, and the 15 repeatability tests show reasonable variation in both errors and times.
            <br>
            Having completed implementing and testing the core functionality of the platform, the focus this week on the software side is making the platform easy to use. To this end, we decided to build a simple browser-based user interface with which users can simply enter their desired settings and click “Run”. To build the interface, a lightweight Flask server was added which runs continually on the Raspberry Pi and exposes a simple webpage on the local network. When the user connects to this webpage, they are provided with options to configure the system, run dilution processes, and view the results and data logs from these processes. The Flask server responds to the user’s requests by communicating with the core platform interface to run dilutions or fetch run data from the Raspberry Pi’s local storage. A high-level overview of the new software system incorporating the Flask server and UI is shown here:
            <figure>
                <img src="img/sw-schematic.png" width="100" class="center">
            </figure>
            </p>
        </div>
        <div class="section-gap-top"></div>

        <div class="container">
			<a class="anchor" id="blog-5"></a>
            <h3>March 12, 2021 - RPi Software Development</h3>
            <pre></pre>
            <p>
            On the software side, the last couple of weeks have focused on writing code to implement the core functions of the Hourglass system. This includes the peripheral device interfaces, feedback control system, and high-level API with which to interact with the system. The Raspberry Pi made it easy to set up serial and GPIO interfaces for reading and controlling the precision balance, temperature sensors, and pumps: each has its own simple interface which acts as a middleman between the main platform software module and the device itself. The tricky part was implementing the feedback system in order to meet the necessary maximum error and time constraints. To this end, two key changes allowed us to meet the specs. First, a two-stage feedback system is used to provide high-speed dispensing in early stages while also handling fine-grained control as the mass approaches its final target. This allowed us to meet our time constraint even when two litres are dispensed. Next, we observed that the dispensing of the chemical solution is the limiting factor in terms of minimizing concentration error. We improved this process by dynamically recomputing the required mass of water which would achieve the desired final concentration. As such, the platform will over-dispense water to account for over-dispensed chemical solution, which is possible due to the fact that the margin of error for dispensing water is significantly larger than that for dispensing chemical solution.

            <br>
            Having implemented the full functionality of the system, we turned our attention to testing. Our three system inputs are the input concentration, output concentration, and output volume. To cover the full range of all three inputs, we decided to conduct tests with inputs spanning the full range of each input parameter in a grid-like fashion. Additionally, we plan to conduct a repeatability experiment by running dispensing jobs with identical inputs multiple times, thereby allowing us to see the variation in errors and times over multiple runs. Testing is ongoing, and we expect to complete it in the next week or two.
            </p>
        </div>
        <div class="section-gap-top"></div>


        <div class="container">
			<a class="anchor" id="blog-4"></a>
            <h3>February 12, 2021 - Mechanical and electrical integration</h3>
            <pre></pre>
            <p>
                Once the peristaltic pump was tested by the electrical team to ensure it would meet specs, pumps and some additional components were ordered by the mechanical team to complete assembly. 
                A protoboard was soldered to distribute the 12V to two separate channels each with a pair of smoothing capacitors to power the two pumps. 3D prints were found to have suitable strength, proving a suitable 
                alternative to the aluminum parts given the current manufacturing situation. Figure 5 and 6 below show the wiring, and scale assembly respectively.
                <figure>
                    <img src="img/mech-scale.jpeg" width="100" class="center">
                    <figcaption class="text-center"> Figure 6: mechanical team wiring, scale, and 3D print assembly</figcaption>
                </figure>
                <br>
                <figure>
                    <img src="img/mech-wires.jpeg" width="100" class="center">
                    <figcaption class="text-center"> Figure 5: mechanical team adruino wiring for pump testing</figcaption>
                </figure>

                <br><br>To test the pumps, basic Arduino code was used to vary speed based on a potentiometer input. 
                A potential risk moving forward is the resistance of the pump tubing which created uncertainty in the mass measurement and made it challenging to keep the pump tubing submerged. 
                In the coming week, a protective enclosure will be printed to house the protoboard, switches, and Raspberry Pi, completing the mechanical assembly. 
                It will then be handed off to the software team to begin integration with the controls software. An RS-232 to USB cable was sourced to interface between the scale and RPi. 
                Below is a video of the pumps running with an item on the scale.
                <iframe width="300" height="400" class="center"
                    src="https://www.youtube.com/embed/GninDzAAE_s">
                </iframe> 
            </p>
        </div>
        <div class="section-gap-top"></div>

        <div class="container">
			<a class="anchor" id="blog-3"></a>
            <h3>February 5, 2021 - Electrical build and validation</h3>
            <pre></pre>
            <p>
                Components finished shipping to the electrical team in British Columbia this week, so progress started on the electrical build and validation. The RPi4 was programmed using python to generate PWM signals for the pump. 
                The PWM signals are passed through a PWM switch to isolate the RPi’s 3.3V logic voltage, and the 12V high-current power rail used for the pumps. Below in Figure 3 the electrical schematic is shown. 
                Note the schematic is for a single pump, and the wiring is duplicated for any additional pump.
                <figure>
                    <img src="img/schematic.png" width="100" class="center">
                    <figcaption class="text-center"> Figure 3: updated schematic for pump wiring</figcaption>
                </figure>
                <br><br>The pump was tested and successfully validated for the project’s specifications. 
                The minimum and maximum dispense rates were measured by pumping 0.5L up a height of 0.5m multiple times to get a representative average:
                <br>• Low end dispense rate: 0.233 mL/sec
                <br>• High end dispense rate: 7.22 mL/sec
                <br><br>The pump rate on the product spec promised 8.33 mL/sec, but the tested performance is lower by 13%. 
                Such pump performance would enable a single pump to dispense 2L in 4.6 minutes. It may be unrealistic to source, order, and validate a new pump given the long shipping times. 
                If controls is unable to guarantee a 5 minute total dispense time for a 2L diluted solution, the project constraints may be changed to accommodate the given equipment. Videos below show the pump working. 
                <br><br>PWM frequency was tuned for this specific pump. Starting at 10 Hz, it was increased until 20 Hz, where the pump motion was steady for any given speed, and the dispense rate was still high. 
                It is extra important to find a good PWM frequency for this setup, as this pump has 3 rollers that tend to accelerate when a pair of them is around the in/out valves, and leads to unequal dispense rate vs time. 
                The electrical team also noticed the power supply unit (PSU) was struggling with the fast switching, most likely designed for a constant current load. Thus, capacitors were added to the schematic to smooth out the current. 
                1 mF capacitors will be placed in parallel with the input side of the PWM switch, each capacitor covering the load current for ~1 ms and changing the load seen by the PSU to one of more constant current. 
                Two videos below show the pump in action, the first video showing speed control via PWM, and the second video showing a slow and steady dispense of liquid.
                
                <br>
                <iframe width="300" height="400" class="center"
                    src="https://www.youtube.com/embed/5vLAyPyWbyI">
                </iframe> 
                <br>
                <iframe width="300" height="400" class="center"
                    src="https://www.youtube.com/embed/ZTRiZccpMvc">
                </iframe> 

                <br><br>The next steps are to replicate and validate the setup with the mechanical team located in Ontario. Then, the mechanical assembly will be finished, and handed off to software for controls.
            </p>
        </div>
        <div class="section-gap-top"></div>
       
        <div class="container">
			<a class="anchor" id="blog-2"></a>
            <h3>January 31, 2021 - Starting the mechanical build</h3>
            <pre></pre>
            <p>
                With a 3D printer acquired and the balance delivered, the mechanical team began manufacturing and assembly of the system. The first parts to be printed were a set of back and front feet to elevate the balance off the ground, allowing for electronics to be mounted in the space below. Working with the existing balance pieces, the 3D printed feet were retrofitted without the need of any additional hardware.
                <br><br>The original design featured an aluminum box tube as the spine of the mechanical frame. However, limitations in machine shop availability led to experimentation with 3D printing this part in segments. The first attempt is seen in the picture below and connects via dovetail cutouts which can be further secured by epoxy. While the strength of the piece has been reduced there is the option of printing the parts solid if further reinforcement is required. 
                <br><br>Looking ahead to next week, pump testing is the primary goal to enable the completion of the mechanical design. 
            </p>
            <figure>
                <img src="img/scale.jpg" width="100" class="center">
                <figcaption class="text-center"> Figure 2: scale with 3D printed feed and stand</figcaption>
            </figure>
        </div>
        <div class="section-gap-top"></div>
        
        <div class="container">
			<a class="anchor" id="blog-1"></a>
            <h3>January 22, 2021 - Part sourcing and ordering</h3>
            <pre></pre>
            <p>
                This week the team put together a final partslist for the electrical system. This required finalizing the components and ensuring they would be able to fit the specs. Waterproof thermometers were found, but because it was unknown whether they could withstand acid the team solved the problem by planning to submerge the thermometers in a sealed water-filled container, and place the acid-proof container into acid. This way the temperature is still recorded with reasonable latency, while protecting the equipment.
                <br><br>A peristaltic pump was found, which on paper should be able to perform both the coarse and fine fluid transfers. To test the pump and develop the rest of the system, the following components were ordered:
                <br>• Raspberry Pi 4 set (includes power supply, memory, everythign to get started)
                <br>• High-side switches up to 35V (to be used for pump motor PWM control)
                <br>• Electrical workbench supplies (breadboard, wires, diodes, etc...
                <br>• 12V 6A power supply
                <br>• Pump
                <br><br>A plan is in place to set up a linux environment on the RPi and use it to control pump speed via PWM and validate the pump. The pump is shown in the image below:
            </p>
            <figure>
                <img src="img/pump.jpg" width="100" class="center">
                <figcaption class="text-center"> Figure 1: selected peristaltic pump</figcaption>
            </figure>
        </div>
    </section>
    <!-- End post-content Area -->

    <!-- start footer Area -->
    <footer>
        <pre></pre>

        <div class="container">
            <img src="img/logo.png" width="200"><br><br>

            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            Copyright &copy;
            <script>
                document.write(new Date().getFullYear());
            </script>
            All rights reserved<br><br>This website was made with the help of <a style="color:grey;" target="_blank" href="https://colorlib.com">Colorlib
			</a>
        </div>
    </footer>
    <!-- End footer Area -->

    <script src="js/vendor/jquery-2.2.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="js/vendor/bootstrap.min.js"></script>
    <script src="js/jquery.ajaxchimp.min.js"></script>
    <script src="js/parallax.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/isotope.pkgd.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/jquery.sticky.js"></script>
    <script src="js/main.js"></script>
</body>

</html>